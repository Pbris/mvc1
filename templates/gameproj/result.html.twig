{% extends "proj.html.twig" %}

{% block title %}Blackjack - Result{% endblock %}

{% block body %}
<h1>Blackjack - Game Result</h1>
<h2>{{ playerName }}'s Game</h2>
<p>Final Bank Balance: ${{ playerBank|number_format(2, '.', ',') }}</p>

{% for i, hand in hands %}
    <h3>Hand {{ i + 1 }} {% if isComputerHand[i] %}(Computer){% endif %} (Value: {{ handValues[i] }})</h3>
    <ul>
        {% for card in hand.hand %}
            <li class="cards">{{ card.getAsString() }}</li>
        {% endfor %}
    </ul>
    {% if hand.status == 'blackjack' %}
        <p><strong>Blackjack!</strong></p>
    {% endif %}
{% endfor %}

<h3>Dealer's Hand (Value: {{ dealerValue }})</h3>
<ul>
    {% for card in dealerHand %}
        <li class="cards">{{ card.getAsString() }}</li>
    {% endfor %}
</ul>
{% if dealerHand.status is defined and dealerHand.status == 'blackjack' %}
    <p><strong>Dealer Blackjack!</strong></p>
{% endif %}

{% for i, hand in hands %}
    <h4>Hand {{ i + 1 }} Result:</h4>
    {% if hand.status == 'blackjack' and dealerHand.status is not defined %}
        <p>Blackjack win!</p>
    {% elseif hand.status == 'blackjack' and dealerHand.status is defined %}
        <p>Push (both have blackjack)</p>
    {% elseif hand.status != 'blackjack' and dealerHand.status is defined %}
        <p>Lost to dealer's blackjack</p>
    {% elseif handValues[i] > 21 %}
        <p>Busted!</p>
    {% elseif handValues[i] > dealerValue or dealerValue > 21 %}
        <p>Won!</p>
    {% elseif handValues[i] == dealerValue %}
        <p>It's a tie.</p>
    {% else %}
        <p>Lost</p>
    {% endif %}
{% endfor %}

<a href="{{ path('game_play_again_proj') }}">Play Again</a>
{% endblock %}